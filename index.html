<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Flashcard Learning App</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .flip-container {
            perspective: 1000px;
        }
        
        .flip-card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            cursor: pointer;
        }
        
        .flip-card.flipped {
            transform: rotateX(180deg);
        }
        
        .flip-card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 1.5rem;
            background: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .flip-card-back {
            transform: rotateX(180deg);
        }
        
        .card-animating {
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.15s ease;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Mock Claude API for demo purposes
        window.claude = {
            complete: async (prompt) => {
                // This is a mock implementation
                // In a real deployment, you'd need to implement your own backend
                const mockFlashcards = [
                    { front: "Capital of France", back: "Paris - The city of lights and the largest city in France" },
                    { front: "Capital of Japan", back: "Tokyo - One of the world's most populous metropolitan areas" },
                    { front: "Capital of Brazil", back: "Brasília - A planned city built in the 1960s" },
                    { front: "Capital of Australia", back: "Canberra - Not Sydney or Melbourne, but the planned capital" },
                    { front: "Capital of Canada", back: "Ottawa - Located in Ontario, on the Ottawa River" }
                ];
                
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                return JSON.stringify(mockFlashcards);
            }
        };

        const ChevronLeft = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
        );

        const ChevronRight = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
        );

        const TRANSLATIONS = {
            "en-US": {
                "createFlashcardsTitle": "Create flashcards",
                "pasteTextTab": "Paste text",
                "describeTopicTab": "Describe topic",
                "describeTopicPlaceholder": "Describe a topic Claude will generate the details...\n\ne.g. capitals of the world\ne.g. fun facts about San Diego",
                "pasteTextPlaceholder": "Paste your text here...",
                "generateFlashcardsButton": "Generate flashcards",
                "generatingTitle": "Generating your flashcard set...",
                "generatingSubtitle": "This may take a while depending on the upload...",
                "flipInstruction": "Use ↑↓ arrows or click to flip",
                "createNewFlashcardsLink": "Create new flashcards"
            }
        };

        const locale = 'en-US';
        const t = (key) => TRANSLATIONS[locale]?.[key] || TRANSLATIONS['en-US'][key] || key;

        const FlashcardApp = () => {
            const [mode, setMode] = useState('create');
            const [topic, setTopic] = useState('');
            const [flashcards, setFlashcards] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [flipped, setFlipped] = useState(false);
            const [activeTab, setActiveTab] = useState('describe');
            const [animating, setAnimating] = useState(false);

            const generateFlashcards = async () => {
                if (!topic.trim()) return;
                
                setMode('loading');
                
                try {
                    const response = await window.claude.complete(`Generate flashcards about: ${topic}`);
                    const cards = JSON.parse(response);
                    setFlashcards(cards);
                    setCurrentIndex(0);
                    setFlipped(false);
                    setMode('study');
                } catch (error) {
                    console.error('Error generating flashcards:', error);
                    alert('Failed to generate flashcards. Please try again.');
                    setMode('create');
                }
            };

            const handleFlip = () => {
                setFlipped(!flipped);
            };

            const handleNext = () => {
                if (currentIndex < flashcards.length - 1 && !animating) {
                    setAnimating(true);
                    setTimeout(() => {
                        setFlipped(false);
                        setCurrentIndex(currentIndex + 1);
                        setTimeout(() => setAnimating(false), 50);
                    }, 150);
                }
            };

            const handlePrevious = () => {
                if (currentIndex > 0 && !animating) {
                    setAnimating(true);
                    setTimeout(() => {
                        setFlipped(false);
                        setCurrentIndex(currentIndex - 1);
                        setTimeout(() => setAnimating(false), 50);
                    }, 150);
                }
            };

            const handleKeyPress = (e) => {
                if (mode === 'study') {
                    if (e.key === 'ArrowLeft') handlePrevious();
                    if (e.key === 'ArrowRight') handleNext();
                    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                        e.preventDefault();
                        handleFlip();
                    }
                }
            };

            useEffect(() => {
                window.addEventListener('keydown', handleKeyPress);
                return () => window.removeEventListener('keydown', handleKeyPress);
            }, [mode, currentIndex, flashcards.length, flipped, animating]);

            if (mode === 'create') {
                return (
                    <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: '#6A9BCC' }}>
                        <div className="w-full max-w-lg p-8">
                            <h1 className="text-white text-4xl font-bold text-center mb-8">{t('createFlashcardsTitle')}</h1>
                            
                            <div className="flex justify-center mb-6">
                                <div className="bg-white/20 p-0.5 rounded-full inline-flex">
                                    <button
                                        onClick={() => setActiveTab('paste')}
                                        className={`px-6 py-2 rounded-full font-medium transition-all text-base ${
                                            activeTab === 'paste' 
                                                ? 'bg-white text-gray-700 shadow-md' 
                                                : 'text-white hover:text-white/90'
                                        }`}
                                    >
                                        {t('pasteTextTab')}
                                    </button>
                                    <button
                                        onClick={() => setActiveTab('describe')}
                                        className={`px-6 py-2 rounded-full font-medium transition-all text-base ${
                                            activeTab === 'describe' 
                                                ? 'bg-white text-gray-700 shadow-md' 
                                                : 'text-white hover:text-white/90'
                                        }`}
                                    >
                                        {t('describeTopicTab')}
                                    </button>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-3xl p-8 shadow-lg">
                                <textarea
                                    value={topic}
                                    onChange={(e) => setTopic(e.target.value)}
                                    placeholder={activeTab === 'describe' 
                                        ? t('describeTopicPlaceholder')
                                        : t('pasteTextPlaceholder')}
                                    className="w-full h-52 text-gray-900 placeholder-gray-400 resize-none focus:outline-none"
                                    style={{ fontSize: '18px', lineHeight: '1.6' }}
                                />
                            </div>
                            
                            <button
                                onClick={generateFlashcards}
                                className="w-full mt-8 py-4 bg-gray-900 text-white font-medium rounded-full hover:bg-gray-800 transition-colors text-lg"
                            >
                                {t('generateFlashcardsButton')}
                            </button>
                        </div>
                    </div>
                );
            }

            if (mode === 'loading') {
                return (
                    <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: '#6A9BCC' }}>
                        <div className="text-center">
                            <h1 className="text-white text-4xl font-medium mb-4">{t('generatingTitle')}</h1>
                            <p className="text-white/80 mb-8">{t('generatingSubtitle')}</p>
                            <div className="flex justify-center">
                                <div className="w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"></div>
                            </div>
                        </div>
                    </div>
                );
            }

            if (mode === 'study') {
                const currentCard = flashcards[currentIndex];
                
                return (
                    <div className="min-h-screen flex items-center justify-center" style={{ backgroundColor: '#6A9BCC' }}>
                        <div className="w-full max-w-2xl px-8">
                            <div className={`flip-container w-full h-96 ${animating ? 'card-animating' : ''}`}>
                                <div
                                    className={`flip-card ${flipped ? 'flipped' : ''}`}
                                    onClick={handleFlip}
                                >
                                    {/* Front of card */}
                                    <div className="flip-card-face flex-col">
                                        <div className="text-center flex-1 flex items-center justify-center">
                                            <h2 className="text-4xl font-medium text-gray-800">{currentCard.front}</h2>
                                        </div>
                                        <p className="text-gray-500 mt-auto">{t('flipInstruction')}</p>
                                    </div>
                                    
                                    {/* Back of card */}
                                    <div className="flip-card-face flip-card-back">
                                        <div className="text-center">
                                            <p className="text-xl text-gray-700 leading-relaxed">{currentCard.back}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex items-center justify-center mt-8">
                                <button
                                    onClick={handlePrevious}
                                    disabled={currentIndex === 0}
                                    className={`p-3 rounded-full transition-all ${
                                        currentIndex === 0 
                                            ? 'bg-white/20 text-white/50 cursor-not-allowed' 
                                            : 'bg-white/20 text-white hover:bg-white/30'
                                    }`}
                                >
                                    <ChevronLeft />
                                </button>
                                
                                <span className="mx-6 text-white text-lg font-medium">
                                    {currentIndex + 1} / {flashcards.length}
                                </span>
                                
                                <button
                                    onClick={handleNext}
                                    disabled={currentIndex === flashcards.length - 1}
                                    className={`p-3 rounded-full transition-all ${
                                        currentIndex === flashcards.length - 1 
                                            ? 'bg-white/20 text-white/50 cursor-not-allowed' 
                                            : 'bg-white/20 text-white hover:bg-white/30'
                                    }`}
                                >
                                    <ChevronRight />
                                </button>
                            </div>
                            
                            <div className="text-center mt-6">
                                <button
                                    onClick={() => {
                                        setMode('create');
                                        setTopic('');
                                        setFlashcards([]);
                                    }}
                                    className="text-white/70 hover:text-white transition-colors underline-offset-2 hover:underline"
                                >
                                    {t('createNewFlashcardsLink')}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }
        };

        ReactDOM.render(<FlashcardApp />, document.getElementById('root'));
    </script>
</body>
</html>
